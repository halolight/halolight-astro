---
/**
 * Recent Users Widget
 * Displays list of recently registered users
 */
interface Props {
  title?: string;
  class?: string;
}

const { title = '最近用户', class: className } = Astro.props;

// Mock recent users data
const recentUsers = [
  {
    id: '1',
    name: '张三',
    email: 'zhangsan@example.com',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=zhangsan',
    joinedAt: '2分钟前',
    role: '用户',
  },
  {
    id: '2',
    name: '李四',
    email: 'lisi@example.com',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=lisi',
    joinedAt: '15分钟前',
    role: '用户',
  },
  {
    id: '3',
    name: '王五',
    email: 'wangwu@example.com',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=wangwu',
    joinedAt: '1小时前',
    role: '管理员',
  },
  {
    id: '4',
    name: '赵六',
    email: 'zhaoliu@example.com',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=zhaoliu',
    joinedAt: '3小时前',
    role: '用户',
  },
  {
    id: '5',
    name: '孙七',
    email: 'sunqi@example.com',
    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=sunqi',
    joinedAt: '5小时前',
    role: '用户',
  },
];
---

<div class:list={['card p-6', className]}>
  <div class="flex items-center justify-between mb-4">
    <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
      {title}
    </h3>
    <a
      href="/dashboard/users"
      class="text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300"
    >
      查看全部
    </a>
  </div>

  <div class="space-y-3">
    {
      recentUsers.map((user) => (
        <div class="flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors">
          <img src={user.avatar} alt={user.name} class="w-10 h-10 rounded-full" />
          <div class="flex-1 min-w-0">
            <div class="flex items-center gap-2">
              <p class="text-sm font-medium text-gray-900 dark:text-white truncate">{user.name}</p>
              {user.role === '管理员' && (
                <span class="px-1.5 py-0.5 text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900/30 dark:text-primary-300 rounded">
                  管理员
                </span>
              )}
            </div>
            <p class="text-xs text-gray-500 dark:text-gray-400 truncate">{user.email}</p>
          </div>
          <div class="text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap">
            {user.joinedAt}
          </div>
        </div>
      ))
    }
  </div>

  <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between text-sm">
      <span class="text-gray-500 dark:text-gray-400">今日新增</span>
      <span class="font-semibold text-gray-900 dark:text-white">+12</span>
    </div>
  </div>
</div>
